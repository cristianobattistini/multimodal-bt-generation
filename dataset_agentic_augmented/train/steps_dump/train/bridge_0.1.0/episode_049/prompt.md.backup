ROLE: Embodied Planner
GOAL: Analyze the scene and generate a valid BehaviorTree.CPP XML plan.

INPUTS:
- Scene Image: The current visual observation of the robot workspace
- Instruction: Move cucumber to bowl, laying down. If flipping fails, push the cucumber slightly to reposition it and retry flipping.
- Allowed Actions: [FLIP(obj), PLACE_INSIDE(obj), NAVIGATE_TO(obj), PUSH(obj), GRASP(obj)]

OUTPUT FORMAT:
scene_analysis:
  target: "cucumber"
  destination: "orange_bowl"
  expanded_instruction: "Navigate to the cucumber, grasp it, flip it to lay it on its side, navigate to the orange bowl, place it inside, and release. If flipping fails, push the cucumber slightly to reposition it and retry flipping."
  scene_context: "Cucumber is on the workspace upright or in an uncertain orientation. Bowl (orange_bowl) is the intended destination. Objects around may cause occlusion or awkward poses that can make flipping fail."
  expected_sequence: "Navigate to cucumber; grasp cucumber; flip cucumber (or if flipping fails: push cucumber to reposition, then flip again); navigate to orange_bowl; place inside orange_bowl; release."
Plan:
<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <Sequence>
      <!-- Navigate to cucumber -->
      <Action ID="NAVIGATE_TO" obj="cucumber"/>
      <!-- Grasp cucumber -->
      <Action ID="GRASP" obj="cucumber"/>
      <!-- Flip cucumber to lay on its side (orient horizontally) -->
      <Fallback>
        <!-- Primary plan: try the original action -->
        <Action ID="FLIP" obj="cucumber"/>
        <!-- Plan B: fallback action, then retry -->
        <Sequence>
          <Action ID="PUSH" obj="cucumber"/>
          <Action ID="FLIP" obj="cucumber"/>
        </Sequence>
      </Fallback>
      <!-- Navigate to orange_bowl -->
      <Action ID="NAVIGATE_TO" obj="orange_bowl"/>
      <!-- Place inside orange_bowl -->
      <Action ID="PLACE_INSIDE" obj="orange_bowl"/>
      <!-- Release -->
      <Action ID="RELEASE"/>
    </Sequence>
  </BehaviorTree>
</root>