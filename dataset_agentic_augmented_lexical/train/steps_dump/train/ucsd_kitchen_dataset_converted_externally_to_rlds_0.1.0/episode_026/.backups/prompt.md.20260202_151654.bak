ROLE: Embodied Planner
GOAL: Analyze the scene and generate a valid BehaviorTree.CPP XML plan.

INPUTS:
- Scene Image: The current visual observation of the robot workspace
- Instruction: Open the carbinet door. Retry grasping up to 2 times; if all fail, use push as Plan B.
- Allowed Actions: [PUSH(obj), NAVIGATE_TO(obj), OPEN(obj), GRASP(obj), RELEASE()]

OUTPUT FORMAT:
scene_analysis:
  target: "carbinet_door"
  destination: ""
  expanded_instruction: "Open the carbinet door. Retry grasping up to 2 times; if all fail, use push as Plan B."
  scene_context: "The cabinet door is within reach but may be partially occluded or misaligned. The robot must navigate to the cabinet, grasp the door handle/edge, open the door, and release."
  expected_sequence: "Navigate to the cabinet door, attempt to grasp the door (retry up to 2 times). If all grasp retries fail, push the door to reposition it and then attempt grasp again, then open the door and release."
Plan:
<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <Sequence>
      <!-- Navigate to carbinet_door -->
      <Action ID="NAVIGATE_TO" obj="carbinet_door"/>
      <!-- Grasp carbinet_door -->
      <Fallback>
        <!-- Primary: retry the action multiple times -->
        <!-- RetryUntilSuccessful will attempt the same GRASP up to num_attempts="2" to handle transient failures -->
        <RetryUntilSuccessful num_attempts="2">
          <Action ID="GRASP" obj="carbinet_door"/>
        </RetryUntilSuccessful>
        <!-- Plan B: fallback action, then retry -->
        <!-- If retries fail, PUSH is used to reposition the object, then GRASP is attempted again -->
        <Sequence>
          <Action ID="PUSH" obj="carbinet_door"/>
          <Action ID="GRASP" obj="carbinet_door"/>
        </Sequence>
      </Fallback>
      <!-- Open carbinet_door -->
      <Action ID="OPEN" obj="carbinet_door"/>
      <!-- Release -->
      <Action ID="RELEASE"/>
    </Sequence>
  </BehaviorTree>
</root>