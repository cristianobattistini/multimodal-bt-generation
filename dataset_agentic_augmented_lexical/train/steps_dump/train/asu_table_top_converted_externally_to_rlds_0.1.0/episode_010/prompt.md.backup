ROLE: Embodied Planner
GOAL: Analyze the scene and generate a valid BehaviorTree.CPP XML plan.

INPUTS:
- Scene Image: The current visual observation of the robot workspace
- Instruction: put down glass bottle. If placing on top fails, push on the table to clear or reposition obstacles and retry placing on top.
- Allowed Actions: [NAVIGATE_TO(obj), PUSH(obj), GRASP(obj), PLACE_ON_TOP(obj)]

OUTPUT FORMAT:
scene_analysis:
  target: "glass_bottle"
  destination: "table"
  expanded_instruction: "Put down the glass bottle on the table. If placing on top fails, push on the table to clear or reposition obstacles and retry placing on top."
  scene_context: "A glass bottle is reachable on the workspace. The table surface may have clutter or small obstacles that could block stable placement. Robot can navigate, grasp, push, place, and release."
  expected_sequence: "Navigate to the bottle, grasp it, navigate to the table, attempt to place it on top. If placement fails due to obstacles or instability, push the table area to clear/reposition obstructions, then attempt placing on top again, then release."
Plan:
<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <Sequence>
      <!-- Navigate to glass_bottle -->
      <Action ID="NAVIGATE_TO" obj="glass_bottle"/>
      <!-- Grasp glass_bottle -->
      <Action ID="GRASP" obj="glass_bottle"/>
      <!-- Navigate to table -->
      <Action ID="NAVIGATE_TO" obj="table"/>
      <!-- Place on table -->
      <Fallback>
        <!-- Primary plan: try the original action -->
        <!-- Place on table -->
        <Action ID="PLACE_ON_TOP" obj="table"/>
        <!-- Plan B: fallback action, then retry -->
        <Sequence>
          <!-- Use push to clear obstacles on the table -->
          <Action ID="PUSH" obj="table"/>
          <!-- Retry placing on table -->
          <Action ID="PLACE_ON_TOP" obj="table"/>
        </Sequence>
      </Fallback>
      <!-- Release -->
      <Action ID="RELEASE"/>
    </Sequence>
  </BehaviorTree>
</root>