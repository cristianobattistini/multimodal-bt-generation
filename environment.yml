name: multimodal-bt-generation
channels:
  - defaults
  - conda-forge
dependencies:
  - python=3.10
  - pip

  # --- Base pipeline (Conda: stable binaries) ---
  - lxml            # low-level XML parsing/validation
  - opencv          # video/image I/O, frame extraction
  - numpy           # numeric operations
  - rich            # formatted logging
  - typer           # CLI
  - pytest          # unit test

  - pip:
      # --- Base pipeline (Pip) ---
      - pydantic==2.*      # schema models/validation (Plan/Step)
      - jsonschema         # JSON validation against schema

      # --- OpenAI ---
      - openai             # Official OpenAI SDK
      - python-dotenv      # load .env for keys/endpoints

      # --- Deep Learning / HF stack ---
      # Choose ONE of the torch options below:
      # 1) CPU-only (portable):
      - torch==2.3.* ; platform_system!="Linux" or platform_machine!="x86_64"
      # 2) CUDA 12.1 (recent Linux/NVIDIA):
      # - torch==2.3.*+cu121 -f https://download.pytorch.org/whl/torch_stable.html
      # 3) CUDA 11.8 (older clusters):
      # - torch==2.3.*+cu118 -f https://download.pytorch.org/whl/torch_stable.html

      - torchvision==0.18.*     # align with torch version
      - transformers            # HF models (LLM/VLM)
      - sentencepiece           # tokenizer (LLaMA/Alpaca)
      - datasets                # HF dataset management
      - huggingface_hub         # model download/upload
      - safetensors             # efficient weight format
      - accelerate              # training/inference orchestration
      - peft                    # LoRA/PEFT
      - protobuf                # required by various HF models

      # --- Vision backbones / util ---
      - timm                   # vision backbone (ViT, etc.)
      - einops                 # tensor manipulation

      # --- Detection ---
      - ultralytics            # YOLO baseline (useful for smoke tests)
      # - groundingdino          # open-vocabulary detector
      - pyyaml                 # required by groundingdino
      - shapely                # required by groundingdino
      # - pycocotools            # COCO metrics (Linux/macOS)
      # - pycocotools-windows  # use this on Windows if the line above fails

      # --- Extra validation ---
      - xmlschema              # additional XSD validation

      # --- Dev tools (optional but recommended) ---
      - mypy                   # type checking
      - black                  # formatter
      - flake8                 # linting

      # --- Evaluation helpers ---
      - evaluate               # dataset metrics

      # to load OXE Datasets
      - tensorflow
      - tensorflow-datasets
      - gcsfs
